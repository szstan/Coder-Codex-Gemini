---
name: ccg-project-handover
description: |
  中途接手项目的进度分析和评估。
  Use when: 接手新项目、评估项目现状、生成初始进度配置。
---

# CCG 项目接手分析

## 概述

当你中途接手一个项目时，本 Skill 帮助你快速了解项目现状、评估完成度、识别风险，并生成初始的进度管理配置。

### 核心功能

1. **项目探索**：快速了解项目基本信息
2. **Codex 深度分析**：全面评估代码质量和完成度
3. **风险识别**：发现潜在问题和阻塞项
4. **进度配置生成**：自动生成 PROJECT_ROADMAP.md 和 .ccg/progress.json

---

## 完整流程（5 步）

```
步骤 1: Claude 初步探索 (15 分钟)
  ↓
步骤 2: Codex 深度分析 (30-45 分钟)
  ↓
步骤 3: Claude 整理分析结果 (15 分钟)
  ↓
步骤 4: 生成进度配置文件 (10 分钟)
  ↓
步骤 5: 用户确认和调整 (按需)
```

---

## 步骤 1：Claude 初步探索

### 目标
快速了解项目基本情况，为 Codex 分析做准备。

### 操作清单

**1.1 读取项目元数据**
```bash
# 读取项目配置文件
- README.md
- package.json / pyproject.toml / pom.xml
- .gitignore
- LICENSE
```

**1.2 查看目录结构**
```bash
# 使用 Glob 工具
- 列出主要目录
- 识别源代码目录
- 识别测试目录
- 识别文档目录
```

**1.3 识别技术栈**
```bash
# 根据文件类型判断
- 编程语言（.py / .js / .java）
- 框架（requirements.txt / package.json）
- 数据库（配置文件）
- 部署方式（Dockerfile / docker-compose.yml）
```

**1.4 查看 Git 历史**
```bash
# 使用 Bash 工具
git log --oneline -10
git log --since="1 month ago" --pretty=format:"%h %ad %s" --date=short
```

**1.5 输出初步探索结果**
```
📋 **项目基本信息**
- 项目名称：[从 README 提取]
- 技术栈：[语言 + 框架]
- 代码规模：[文件数量 + 估算行数]
- 最近活跃：[最后提交日期]
- 主要模块：[目录结构]
```

---

## 步骤 2：Codex 深度分析

### 目标
使用 Codex 进行全面的代码分析，评估完成度、质量和风险。

### 2.1 功能完成度分析

**调用 Codex**：
```
请分析以下项目的功能完成度：

**项目信息**：
- 项目名称：XXX
- 技术栈：XXX
- 主要模块：[列出目录]

**分析维度**：
1. 已实现功能列表（按模块分类）
2. 未完成功能（搜索 TODO/FIXME/HACK）
3. 半成品功能（有代码但缺少测试/文档）
4. 功能完整性评估（每个模块 0-100%）

**输出格式**：
### 功能模块清单
- [模块 1]：[完成度]% - [说明]
- [模块 2]：[完成度]% - [说明]

### 未完成功能
- [功能 1]：[位置] - [优先级]
- [功能 2]：[位置] - [优先级]

### 整体评估
- 总体完成度：XX%
- 可交付状态：是/否
- 预计剩余工作量：X 人天
```

### 2.2 代码质量分析

**调用 Codex**：
```
请分析代码质量：

**分析维度**：
1. 技术债务
   - 代码复杂度（圈复杂度高的函数）
   - 重复代码（相似度 > 80%）
   - 过长函数/类（> 200 行）
2. 测试覆盖率
   - 单元测试存在性
   - 测试覆盖率估算
   - 关键路径是否有测试
3. 文档完整性
   - README 质量
   - API 文档
   - 代码注释
4. 代码规范
   - 命名规范
   - 格式化一致性
   - 最佳实践遵循

**输出格式**：
### 质量评分
- 整体评分：A/B/C/D
- 技术债务：高/中/低
- 可维护性：高/中/低

### 主要问题
1. [问题描述] - [严重性] - [位置]
2. [问题描述] - [严重性] - [位置]

### 优先修复建议
1. [建议] - [预计工作量]
2. [建议] - [预计工作量]
```

### 2.3 风险识别

**调用 Codex**：
```
请识别项目风险：

**分析维度**：
1. 架构风险（耦合度、扩展性、单点故障）
2. 依赖风险（过时依赖、安全漏洞、许可证问题）
3. 性能风险（瓶颈点、资源消耗）
4. 维护风险（缺少文档、复杂逻辑、关键人依赖）

**输出格式**：
### 高风险项（必须解决）
- [风险描述] - [影响] - [缓解措施]

### 中风险项（建议解决）
- [风险描述] - [影响] - [缓解措施]

### 低风险项（可延后）
- [风险描述] - [影响] - [缓解措施]
```

---

## 步骤 3：Claude 整理分析结果

### 目标
将 Codex 的分析结果整理成结构化的报告。

### 操作
1. 汇总 Codex 的 3 份分析报告
2. 提取关键数据（完成度、质量评分、风险数量）
3. 生成执行摘要
4. 识别优先级任务

### 输出格式
```
📊 **项目接手分析报告**

## 执行摘要
- 项目名称：XXX
- 总体完成度：XX%
- 代码质量：A/B/C/D
- 高风险项：X 个
- 预计剩余工作量：X 人天

## 功能完成度
[从 Codex 分析提取]

## 代码质量
[从 Codex 分析提取]

## 风险清单
[从 Codex 分析提取]

## 优先级任务（Top 10）
1. [任务] - [优先级] - [预计工作量]
2. [任务] - [优先级] - [预计工作量]
...
```

---

## 步骤 4：生成进度配置文件

### 目标
根据分析结果自动生成 PROJECT_ROADMAP.md 和 .ccg/progress.json

### 4.1 生成 PROJECT_ROADMAP.md

**内容结构**：
- 版本规划（基于完成度估算）
- 里程碑定义（按功能模块）
- 待完成任务（从 Codex 分析提取）
- 风险和阻塞项（从 Codex 分析提取）

### 4.2 生成 .ccg/progress.json

**内容结构**：
- 当前版本进度（基于完成度）
- 里程碑列表（从功能模块映射）
- 活跃任务（Top 10 优先级任务）
- 风险列表（从 Codex 分析提取）
- 统计指标（自动计算）

---

## 步骤 5：用户确认和调整

### 目标
让用户审查和调整生成的配置。

### 操作
1. 展示生成的配置文件
2. 询问用户是否需要调整
3. 根据用户反馈修改
4. 保存最终配置

---

## 使用示例

### 完整执行流程

```bash
# 1. 执行项目接手分析
/ccg-project-handover

# Claude 会自动执行：
# - 步骤 1：初步探索（15 分钟）
# - 步骤 2：调用 Codex 深度分析（30-45 分钟）
# - 步骤 3：整理分析结果（15 分钟）
# - 步骤 4：生成配置文件（10 分钟）
# - 步骤 5：等待用户确认

# 2. 查看生成的配置
cat PROJECT_ROADMAP.md
cat .ccg/progress.json

# 3. 开始使用进度管理
/ccg-progress
```

---

## 最佳实践

1. **完整执行**：不要跳过任何步骤，确保分析全面
2. **保存报告**：将 Codex 分析结果保存到 `docs/PROJECT_ANALYSIS.md`
3. **定期更新**：每个月重新执行一次，跟踪进度变化
4. **团队共享**：将分析报告分享给团队成员

---

## 常见问题

**Q: 分析需要多长时间？**
A: 总计约 1-1.5 小时（Claude 30 分钟 + Codex 30-45 分钟）

**Q: Codex 分析会修改代码吗？**
A: 不会，Codex 使用 read-only sandbox，只分析不修改

**Q: 如何处理大型项目（10 万行+）？**
A: 可以分模块分析，每次分析一个核心模块

**Q: 分析结果准确吗？**
A: Codex 提供客观评估，但需要人工审查和调整

---

## 总结

通过 CCG 项目接手分析，你可以：
- ✅ 快速了解项目现状（1-1.5 小时）
- ✅ 获得客观的完成度评估
- ✅ 识别关键风险和阻塞项
- ✅ 自动生成进度管理配置

**立即开始**：执行 `/ccg-project-handover` 分析你的项目！

